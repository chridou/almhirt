package testalmhirt

import akka.dispatch.{ Await, Future }
import almhirt._
import almhirt.almvalidation.kit._
import almhirt.environment._
import test._
import almhirt.almfuture.inst._
import almhirt.commanding.CommandEnvelope

object EventUpdateRaceConditionsWorksheet extends TestAlmhirtKit {
  implicit val atMost = akka.util.Duration(1, "s")//> atMost  : akka.util.FiniteDuration = 1 second
  inTestAlmhirt { almhirtInstance =>
    implicit val executor = almhirtInstance.environment.context.system.futureDispatcher
    val repo = almhirtInstance.environment.repositories.getForAggregateRoot[TestPerson, TestPersonEvent].awaitResult.forceResult
    val count = 500
    val id = almhirtInstance.getUuid

    almhirtInstance.executeTrackedCommand(NewTestPerson(id, "InitialName"), "CREATE")
    almhirtInstance.getResultOperationStateFor("CREATE").awaitResult

    val commandEnvelopes = Vector((for (i <- 1 to count) yield CommandEnvelope(ChangeTestPersonName(id, Some(1), "name%d".format(i)), Some(i.toString))): _*)
    
    commandEnvelopes.foreach(almhirtInstance.executeCommand(_))
    val statesFutures = commandEnvelopes.map(x => almhirtInstance.getResultOperationStateFor(x.ticket.get))
    val statesFuturesRes = AlmFuture.sequence(statesFutures).awaitResult
//    statesFuturesRes.foreach { updateStates =>
//      updateStates.foreach(x => x fold (f => println(f), succ => println(succ)))
//    }

    
    val events = almhirtInstance.environment.eventLog.getAllEvents.awaitResult.forceResult
    events.foreach(println)
    if(events.size == 2) println ("++++++++++++++++ SUCCESS ++++++++++++++++") else println ("---------- FAILURE -----------------")
    println("EVENTS: %d".format(events.size))
  }                                               //> cmd: Some(StringTrackingTicket(CREATE))
                                                  //| cmd: Some(StringTrackingTicket(1))
                                                  //| cmd: Some(StringTrackingTicket(2))
                                                  //| cmd: Some(StringTrackingTicket(3))
                                                  //| cmd: Some(StringTrackingTicket(4))
                                                  //| cmd: Some(StringTrackingTicket(5))
                                                  //| cmd: Some(StringTrackingTicket(6))
                                                  //| cmd: Some(StringTrackingTicket(7))
                                                  //| cmd: Some(StringTrackingTicket(8))
                                                  //| cmd: Some(StringTrackingTicket(9))
                                                  //| cmd: Some(StringTrackingTicket(10))
                                                  //| cmd: Some(StringTrackingTicket(11))
                                                  //| cmd: Some(StringTrackingTicket(12))
                                                  //| cmd: Some(StringTrackingTicket(13))
                                                  //| cmd: Some(StringTrackingTicket(14))
                                                  //| cmd: Some(StringTrackingTicket(15))
                                                  //| cmd: Some(StringTrackingTicket(16))
                                                  //| cmd: Some(StringTrackingTicket(17))
                                                  //| cmd: Some(StringTrackingTicket(18))
                                                  //| cmd: Some(StringTrackingTicket(19))
                                                  //| cmd: Some(StringTrackingTicket(20))
                                                  //| cmd: Some(StringTrackingTicket(21))
                                                  //| cmd: Some(StringTrackingTicket(22))
                                                  //| cmd: Some(StringTrackingTicket(23))
                                                  //| cmd: Some(StringTrackingTicket(24))
                                                  //| cmd: Some(StringTrackingTicket(25))
                                                  //| cmd: Some(StringTrackingTicket(26))
                                                  //| cmd: Some(StringTrackingTicket(27))
                                                  //| cmd: Some(StringTrackingTicket(28))
                                                  //| cmd: Some(StringTrackingTicket(29))
                                                  //| cmd: Some(StringTrackingTicket(30))
                                                  //| cmd: Some(StringTrackingTicket(31))
                                                  //| cmd: Some(StringTrackingTicket(32))
                                                  //| cmd: Some(StringTrackingTicket(33))
                                                  //| cmd: Some(StringTrackingTicket(34))
                                                  //| cmd: Some(StringTrackingTicket(35))
                                                  //| cmd: Some(StringTrackingTicket(36))
                                                  //| cmd: Some(StringTrackingTicket(37))
                                                  //| cmd: Some(StringTrackingTicket(38))
                                                  //| cmd: Some(StringTrackingTicket(39))
                                                  //| cmd: Some(StringTrackingTicket(40))
                                                  //| cmd: Some(StringTrackingTicket(41))
                                                  //| cmd: Some(StringTrackingTicket(42))
                                                  //| cmd: Some(StringTrackingTicket(43))
                                                  //| cmd: Some(StringTrackingTicket(44))
                                                  //| cmd: Some(StringTrackingTicket(45))
                                                  //| cmd: Some(StringTrackingTicket(46))
                                                  //| cmd: Some(StringTrackingTicket(47))
                                                  //| cmd: Some(StringTrackingTicket(48))
                                                  //| cmd: Some(StringTrackingTicket(49))
                                                  //| cmd: Some(StringTrackingTicket(50))
                                                  //| cmd: Some(StringTrackingTicket(51))
                                                  //| cmd: Some(StringTrackingTicket(52))
                                                  //| cmd: Some(StringTrackingTicket(53))
                                                  //| cmd: Some(StringTrackingTicket(54))
                                                  //| cmd: Some(StringTrackingTicket(55))
                                                  //| cmd: Some(StringTrackingTicket(56))
                                                  //| cmd: Some(StringTrackingTicket(57))
                                                  //| cmd: Some(StringTrackingTicket(58))
                                                  //| cmd: Some(StringTrackingTicket(59))
                                                  //| cmd: Some(StringTrackingTicket(60))
                                                  //| cmd: Some(StringTrackingTicket(61))
                                                  //| cmd: Some(StringTrackingTicket(62))
                                                  //| cmd: Some(StringTrackingTicket(63))
                                                  //| cmd: Some(StringTrackingTicket(64))
                                                  //| cmd: Some(StringTrackingTicket(65))
                                                  //| cmd: Some(StringTrackingTicket(66))
                                                  //| cmd: Some(StringTrackingTicket(67))
                                                  //| cmd: Some(StringTrackingTicket(68))
                                                  //| cmd: Some(StringTrackingTicket(69))
                                                  //| cmd: Some(StringTrackingTicket(70))
                                                  //| cmd: Some(StringTrackingTicket(71))
                                                  //| cmd: Some(StringTrackingTicket(72))
                                                  //| cmd: Some(StringTrackingTicket(73))
                                                  //| cmd: Some(StringTrackingTicket(74))
                                                  //| cmd: Some(StringTrackingTicket(75))
                                                  //| cmd: Some(StringTrackingTicket(76))
                                                  //| cmd: Some(StringTrackingTicket(77))
                                                  //| cmd: Some(StringTrackingTicket(78))
                                                  //| cmd: Some(StringTrackingTicket(79))
                                                  //| cmd: Some(StringTrackingTicket(80))
                                                  //| cmd: Some(StringTrackingTicket(81))
                                                  //| cmd: Some(StringTrackingTicket(82))
                                                  //| cmd: Some(StringTrackingTicket(83))
                                                  //| cmd: Some(StringTrackingTicket(84))
                                                  //| cmd: Some(StringTrackingTicket(85))
                                                  //| cmd: Some(StringTrackingTicket(86))
                                                  //| cmd: Some(StringTrackingTicket(87))
                                                  //| cmd: Some(StringTrackingTicket(88))
                                                  //| cmd: Some(StringTrackingTicket(89))
                                                  //| cmd: Some(StringTrackingTicket(90))
                                                  //| cmd: Some(StringTrackingTicket(91))
                                                  //| cmd: Some(StringTrackingTicket(92))
                                                  //| cmd: Some(StringTrackingTicket(93))
                                                  //| cmd: Some(StringTrackingTicket(94))
                                                  //| cmd: Some(StringTrackingTicket(95))
                                                  //| cmd: Some(StringTrackingTicket(96))
                                                  //| cmd: Some(StringTrackingTicket(97))
                                                  //| cmd: Some(StringTrackingTicket(98))
                                                  //| cmd: Some(StringTrackingTicket(99))
                                                  //| cmd: Some(StringTrackingTicket(100))
                                                  //| cmd: Some(StringTrackingTicket(101))
                                                  //| cmd: Some(StringTrackingTicket(102))
                                                  //| cmd: Some(StringTrackingTicket(103))
                                                  //| cmd: Some(StringTrackingTicket(104))
                                                  //| cmd: Some(StringTrackingTicket(105))
                                                  //| cmd: Some(StringTrackingTicket(106))
                                                  //| cmd: Some(StringTrackingTicket(107))
                                                  //| cmd: Some(StringTrackingTicket(108))
                                                  //| cmd: Some(StringTrackingTicket(109))
                                                  //| cmd: Some(StringTrackingTicket(110))
                                                  //| cmd: Some(StringTrackingTicket(111))
                                                  //| cmd: Some(StringTrackingTicket(112))
                                                  //| cmd: Some(StringTrackingTicket(113))
                                                  //| cmd: Some(StringTrackingTicket(114))
                                                  //| cmd: Some(StringTrackingTicket(115))
                                                  //| cmd: Some(StringTrackingTicket(116))
                                                  //| cmd: Some(StringTrackingTicket(117))
                                                  //| cmd: Some(StringTrackingTicket(118))
                                                  //| cmd: Some(StringTrackingTicket(119))
                                                  //| cmd: Some(StringTrackingTicket(120))
                                                  //| cmd: Some(StringTrackingTicket(121))
                                                  //| cmd: Some(StringTrackingTicket(122))
                                                  //| cmd: Some(StringTrackingTicket(123))
                                                  //| cmd: Some(StringTrackingTicket(124))
                                                  //| cmd: Some(StringTrackingTicket(125))
                                                  //| cmd: Some(StringTrackingTicket(126))
                                                  //| cmd: Some(StringTrackingTicket(127))
                                                  //| cmd: Some(StringTrackingTicket(128))
                                                  //| cmd: Some(StringTrackingTicket(129))
                                                  //| cmd: Some(StringTrackingTicket(130))
                                                  //| cmd: Some(StringTrackingTicket(131))
                                                  //| cmd: Some(StringTrackingTicket(132))
                                                  //| cmd: Some(StringTrackingTicket(133))
                                                  //| cmd: Some(StringTrackingTicket(134))
                                                  //| cmd: Some(StringTrackingTicket(135))
                                                  //| cmd: Some(StringTrackingTicket(136))
                                                  //| cmd: Some(StringTrackingTicket(137))
                                                  //| cmd: Some(StringTrackingTicket(138))
                                                  //| cmd: Some(StringTrackingTicket(139))
                                                  //| cmd: Some(StringTrackingTicket(140))
                                                  //| cmd: Some(StringTrackingTicket(141))
                                                  //| cmd: Some(StringTrackingTicket(142))
                                                  //| cmd: Some(StringTrackingTicket(143))
                                                  //| cmd: Some(StringTrackingTicket(144))
                                                  //| cmd: Some(StringTrackingTicket(145))
                                                  //| cmd: Some(StringTrackingTicket(146))
                                                  //| cmd: Some(StringTrackingTicket(147))
                                                  //| cmd: Some(StringTrackingTicket(148))
                                                  //| cmd: Some(StringTrackingTicket(149))
                                                  //| cmd: Some(StringTrackingTicket(150))
                                                  //| cmd: Some(StringTrackingTicket(151))
                                                  //| cmd: Some(StringTrackingTicket(152))
                                                  //| cmd: Some(StringTrackingTicket(153))
                                                  //| cmd: Some(StringTrackingTicket(154))
                                                  //| cmd: Some(StringTrackingTicket(155))
                                                  //| cmd: Some(StringTrackingTicket(156))
                                                  //| cmd: Some(StringTrackingTicket(157))
                                                  //| cmd: Some(StringTrackingTicket(158))
                                                  //| cmd: Some(StringTrackingTicket(159))
                                                  //| cmd: Some(StringTrackingTicket(160))
                                                  //| cmd: Some(StringTrackingTicket(161))
                                                  //| cmd: Some(StringTrackingTicket(162))
                                                  //| cmd: Some(StringTrackingTicket(163))
                                                  //| cmd: Some(StringTrackingTicket(164))
                                                  //| cmd: Some(StringTrackingTicket(165))
                                                  //| cmd: Some(StringTrackingTicket(166))
                                                  //| cmd: Some(StringTrackingTicket(167))
                                                  //| cmd: Some(StringTrackingTicket(168))
                                                  //| cmd: Some(StringTrackingTicket(169))
                                                  //| cmd: Some(StringTrackingTicket(170))
                                                  //| cmd: Some(StringTrackingTicket(171))
                                                  //| cmd: Some(StringTrackingTicket(172))
                                                  //| cmd: Some(StringTrackingTicket(173))
                                                  //| cmd: Some(StringTrackingTicket(174))
                                                  //| cmd: Some(StringTrackingTicket(175))
                                                  //| cmd: Some(StringTrackingTicket(176))
                                                  //| cmd: Some(StringTrackingTicket(177))
                                                  //| cmd: Some(StringTrackingTicket(178))
                                                  //| cmd: Some(StringTrackingTicket(179))
                                                  //| cmd: Some(StringTrackingTicket(180))
                                                  //| cmd: Some(StringTrackingTicket(181))
                                                  //| cmd: Some(StringTrackingTicket(182))
                                                  //| cmd: Some(StringTrackingTicket(183))
                                                  //| cmd: Some(StringTrackingTicket(184))
                                                  //| cmd: Some(StringTrackingTicket(185))
                                                  //| cmd: Some(StringTrackingTicket(186))
                                                  //| cmd: Some(StringTrackingTicket(187))
                                                  //| cmd: Some(StringTrackingTicket(188))
                                                  //| cmd: Some(StringTrackingTicket(189))
                                                  //| cmd: Some(StringTrackingTicket(190))
                                                  //| cmd: Some(StringTrackingTicket(191))
                                                  //| cmd: Some(StringTrackingTicket(192))
                                                  //| cmd: Some(StringTrackingTicket(193))
                                                  //| cmd: Some(StringTrackingTicket(194))
                                                  //| cmd: Some(StringTrackingTicket(195))
                                                  //| cmd: Some(StringTrackingTicket(196))
                                                  //| cmd: Some(StringTrackingTicket(197))
                                                  //| cmd: Some(StringTrackingTicket(198))
                                                  //| cmd: Some(StringTrackingTicket(199))
                                                  //| cmd: Some(StringTrackingTicket(200))
                                                  //| cmd: Some(StringTrackingTicket(201))
                                                  //| cmd: Some(StringTrackingTicket(202))
                                                  //| cmd: Some(StringTrackingTicket(203))
                                                  //| cmd: Some(StringTrackingTicket(204))
                                                  //| cmd: Some(StringTrackingTicket(205))
                                                  //| cmd: Some(StringTrackingTicket(206))
                                                  //| cmd: Some(StringTrackingTicket(207))
                                                  //| cmd: Some(StringTrackingTicket(208))
                                                  //| cmd: Some(StringTrackingTicket(209))
                                                  //| cmd: Some(StringTrackingTicket(210))
                                                  //| cmd: Some(StringTrackingTicket(211))
                                                  //| cmd: Some(StringTrackingTicket(212))
                                                  //| cmd: Some(StringTrackingTicket(213))
                                                  //| cmd: Some(StringTrackingTicket(214))
                                                  //| cmd: Some(StringTrackingTicket(215))
                                                  //| cmd: Some(StringTrackingTicket(216))
                                                  //| cmd: Some(StringTrackingTicket(217))
                                                  //| cmd: Some(StringTrackingTicket(218))
                                                  //| cmd: Some(StringTrackingTicket(219))
                                                  //| cmd: Some(StringTrackingTicket(220))
                                                  //| cmd: Some(StringTrackingTicket(221))
                                                  //| cmd: Some(StringTrackingTicket(222))
                                                  //| cmd: Some(StringTrackingTicket(223))
                                                  //| cmd: Some(StringTrackingTicket(224))
                                                  //| cmd: Some(StringTrackingTicket(225))
                                                  //| cmd: Some(StringTrackingTicket(226))
                                                  //| cmd: Some(StringTrackingTicket(227))
                                                  //| cmd: Some(StringTrackingTicket(228))
                                                  //| cmd: Some(StringTrackingTicket(229))
                                                  //| cmd: Some(StringTrackingTicket(230))
                                                  //| cmd: Some(StringTrackingTicket(231))
                                                  //| cmd: Some(StringTrackingTicket(232))
                                                  //| cmd: Some(StringTrackingTicket(233))
                                                  //| cmd: Some(StringTrackingTicket(234))
                                                  //| cmd: Some(StringTrackingTicket(235))
                                                  //| cmd: Some(StringTrackingTicket(236))
                                                  //| cmd: Some(StringTrackingTicket(237))
                                                  //| cmd: Some(StringTrackingTicket(238))
                                                  //| cmd: Some(StringTrackingTicket(239))
                                                  //| cmd: Some(StringTrackingTicket(240))
                                                  //| cmd: Some(StringTrackingTicket(241))
                                                  //| cmd: Some(StringTrackingTicket(242))
                                                  //| cmd: Some(StringTrackingTicket(243))
                                                  //| cmd: Some(StringTrackingTicket(244))
                                                  //| cmd: Some(StringTrackingTicket(245))
                                                  //| cmd: Some(StringTrackingTicket(246))
                                                  //| cmd: Some(StringTrackingTicket(247))
                                                  //| cmd: Some(StringTrackingTicket(248))
                                                  //| cmd: Some(StringTrackingTicket(249))
                                                  //| cmd: Some(StringTrackingTicket(250))
                                                  //| cmd: Some(StringTrackingTicket(251))
                                                  //| cmd: Some(StringTrackingTicket(252))
                                                  //| cmd: Some(StringTrackingTicket(253))
                                                  //| cmd: Some(StringTrackingTicket(254))
                                                  //| cmd: Some(StringTrackingTicket(255))
                                                  //| cmd: Some(StringTrackingTicket(256))
                                                  //| cmd: Some(StringTrackingTicket(257))
                                                  //| cmd: Some(StringTrackingTicket(258))
                                                  //| cmd: Some(StringTrackingTicket(259))
                                                  //| cmd: Some(StringTrackingTicket(260))
                                                  //| cmd: Some(StringTrackingTicket(261))
                                                  //| cmd: Some(StringTrackingTicket(262))
                                                  //| cmd: Some(StringTrackingTicket(263))
                                                  //| cmd: Some(StringTrackingTicket(264))
                                                  //| cmd: Some(StringTrackingTicket(265))
                                                  //| cmd: Some(StringTrackingTicket(266))
                                                  //| cmd: Some(StringTrackingTicket(267))
                                                  //| cmd: Some(StringTrackingTicket(268))
                                                  //| cmd: Some(StringTrackingTicket(269))
                                                  //| cmd: Some(StringTrackingTicket(270))
                                                  //| cmd: Some(StringTrackingTicket(271))
                                                  //| cmd: Some(StringTrackingTicket(272))
                                                  //| cmd: Some(StringTrackingTicket(273))
                                                  //| cmd: Some(StringTrackingTicket(274))
                                                  //| cmd: Some(StringTrackingTicket(275))
                                                  //| cmd: Some(StringTrackingTicket(276))
                                                  //| cmd: Some(StringTrackingTicket(277))
                                                  //| cmd: Some(StringTrackingTicket(278))
                                                  //| cmd: Some(StringTrackingTicket(279))
                                                  //| cmd: Some(StringTrackingTicket(280))
                                                  //| cmd: Some(StringTrackingTicket(281))
                                                  //| cmd: Some(StringTrackingTicket(282))
                                                  //| cmd: Some(StringTrackingTicket(283))
                                                  //| cmd: Some(StringTrackingTicket(284))
                                                  //| cmd: Some(StringTrackingTicket(285))
                                                  //| cmd: Some(StringTrackingTicket(286))
                                                  //| cmd: Some(StringTrackingTicket(287))
                                                  //| cmd: Some(StringTrackingTicket(288))
                                                  //| cmd: Some(StringTrackingTicket(289))
                                                  //| cmd: Some(StringTrackingTicket(290))
                                                  //| cmd: Some(StringTrackingTicket(291))
                                                  //| cmd: Some(StringTrackingTicket(292))
                                                  //| cmd: Some(StringTrackingTicket(293))
                                                  //| cmd: Some(StringTrackingTicket(294))
                                                  //| cmd: Some(StringTrackingTicket(295))
                                                  //| cmd: Some(StringTrackingTicket(296))
                                                  //| cmd: Some(StringTrackingTicket(297))
                                                  //| cmd: Some(StringTrackingTicket(298))
                                                  //| cmd: Some(StringTrackingTicket(299))
                                                  //| cmd: Some(StringTrackingTicket(300))
                                                  //| cmd: Some(StringTrackingTicket(301))
                                                  //| cmd: Some(StringTrackingTicket(302))
                                                  //| cmd: Some(StringTrackingTicket(303))
                                                  //| cmd: Some(StringTrackingTicket(304))
                                                  //| cmd: Some(StringTrackingTicket(305))
                                                  //| cmd: Some(StringTrackingTicket(306))
                                                  //| cmd: Some(StringTrackingTicket(307))
                                                  //| cmd: Some(StringTrackingTicket(308))
                                                  //| cmd: Some(StringTrackingTicket(309))
                                                  //| cmd: Some(StringTrackingTicket(310))
                                                  //| cmd: Some(StringTrackingTicket(311))
                                                  //| cmd: Some(StringTrackingTicket(312))
                                                  //| cmd: Some(StringTrackingTicket(313))
                                                  //| cmd: Some(StringTrackingTicket(314))
                                                  //| cmd: Some(StringTrackingTicket(315))
                                                  //| cmd: Some(StringTrackingTicket(316))
                                                  //| cmd: Some(StringTrackingTicket(317))
                                                  //| cmd: Some(StringTrackingTicket(318))
                                                  //| cmd: Some(StringTrackingTicket(319))
                                                  //| cmd: Some(StringTrackingTicket(320))
                                                  //| cmd: Some(StringTrackingTicket(321))
                                                  //| cmd: Some(StringTrackingTicket(322))
                                                  //| cmd: Some(StringTrackingTicket(323))
                                                  //| cmd: Some(StringTrackingTicket(324))
                                                  //| cmd: Some(StringTrackingTicket(325))
                                                  //| cmd: Some(StringTrackingTicket(326))
                                                  //| cmd: Some(StringTrackingTicket(327))
                                                  //| cmd: Some(StringTrackingTicket(328))
                                                  //| cmd: Some(StringTrackingTicket(329))
                                                  //| cmd: Some(StringTrackingTicket(330))
                                                  //| cmd: Some(StringTrackingTicket(331))
                                                  //| cmd: Some(StringTrackingTicket(332))
                                                  //| cmd: Some(StringTrackingTicket(333))
                                                  //| cmd: Some(StringTrackingTicket(334))
                                                  //| cmd: Some(StringTrackingTicket(335))
                                                  //| cmd: Some(StringTrackingTicket(336))
                                                  //| cmd: Some(StringTrackingTicket(337))
                                                  //| cmd: Some(StringTrackingTicket(338))
                                                  //| cmd: Some(StringTrackingTicket(339))
                                                  //| cmd: Some(StringTrackingTicket(340))
                                                  //| cmd: Some(StringTrackingTicket(341))
                                                  //| cmd: Some(StringTrackingTicket(342))
                                                  //| cmd: Some(StringTrackingTicket(343))
                                                  //| cmd: Some(StringTrackingTicket(344))
                                                  //| cmd: Some(StringTrackingTicket(345))
                                                  //| cmd: Some(StringTrackingTicket(346))
                                                  //| cmd: Some(StringTrackingTicket(347))
                                                  //| cmd: Some(StringTrackingTicket(348))
                                                  //| cmd: Some(StringTrackingTicket(349))
                                                  //| cmd: Some(StringTrackingTicket(350))
                                                  //| cmd: Some(StringTrackingTicket(351))
                                                  //| cmd: Some(StringTrackingTicket(352))
                                                  //| cmd: Some(StringTrackingTicket(353))
                                                  //| cmd: Some(StringTrackingTicket(354))
                                                  //| cmd: Some(StringTrackingTicket(355))
                                                  //| cmd: Some(StringTrackingTicket(356))
                                                  //| cmd: Some(StringTrackingTicket(357))
                                                  //| cmd: Some(StringTrackingTicket(358))
                                                  //| cmd: Some(StringTrackingTicket(359))
                                                  //| cmd: Some(StringTrackingTicket(360))
                                                  //| cmd: Some(StringTrackingTicket(361))
                                                  //| cmd: Some(StringTrackingTicket(362))
                                                  //| cmd: Some(StringTrackingTicket(363))
                                                  //| cmd: Some(StringTrackingTicket(364))
                                                  //| cmd: Some(StringTrackingTicket(365))
                                                  //| cmd: Some(StringTrackingTicket(366))
                                                  //| cmd: Some(StringTrackingTicket(367))
                                                  //| cmd: Some(StringTrackingTicket(368))
                                                  //| cmd: Some(StringTrackingTicket(369))
                                                  //| cmd: Some(StringTrackingTicket(370))
                                                  //| cmd: Some(StringTrackingTicket(371))
                                                  //| cmd: Some(StringTrackingTicket(372))
                                                  //| cmd: Some(StringTrackingTicket(373))
                                                  //| cmd: Some(StringTrackingTicket(374))
                                                  //| cmd: Some(StringTrackingTicket(375))
                                                  //| cmd: Some(StringTrackingTicket(376))
                                                  //| cmd: Some(StringTrackingTicket(377))
                                                  //| cmd: Some(StringTrackingTicket(378))
                                                  //| cmd: Some(StringTrackingTicket(379))
                                                  //| cmd: Some(StringTrackingTicket(380))
                                                  //| cmd: Some(StringTrackingTicket(381))
                                                  //| cmd: Some(StringTrackingTicket(382))
                                                  //| cmd: Some(StringTrackingTicket(383))
                                                  //| cmd: Some(StringTrackingTicket(384))
                                                  //| cmd: Some(StringTrackingTicket(385))
                                                  //| cmd: Some(StringTrackingTicket(386))
                                                  //| cmd: Some(StringTrackingTicket(387))
                                                  //| cmd: Some(StringTrackingTicket(388))
                                                  //| cmd: Some(StringTrackingTicket(389))
                                                  //| cmd: Some(StringTrackingTicket(390))
                                                  //| cmd: Some(StringTrackingTicket(391))
                                                  //| cmd: Some(StringTrackingTicket(392))
                                                  //| cmd: Some(StringTrackingTicket(393))
                                                  //| cmd: Some(StringTrackingTicket(394))
                                                  //| cmd: Some(StringTrackingTicket(395))
                                                  //| cmd: Some(StringTrackingTicket(396))
                                                  //| cmd: Some(StringTrackingTicket(397))
                                                  //| cmd: Some(StringTrackingTicket(398))
                                                  //| cmd: Some(StringTrackingTicket(399))
                                                  //| cmd: Some(StringTrackingTicket(400))
                                                  //| cmd: Some(StringTrackingTicket(401))
                                                  //| cmd: Some(StringTrackingTicket(402))
                                                  //| cmd: Some(StringTrackingTicket(403))
                                                  //| cmd: Some(StringTrackingTicket(404))
                                                  //| cmd: Some(StringTrackingTicket(405))
                                                  //| cmd: Some(StringTrackingTicket(406))
                                                  //| cmd: Some(StringTrackingTicket(407))
                                                  //| cmd: Some(StringTrackingTicket(408))
                                                  //| cmd: Some(StringTrackingTicket(409))
                                                  //| cmd: Some(StringTrackingTicket(410))
                                                  //| cmd: Some(StringTrackingTicket(411))
                                                  //| cmd: Some(StringTrackingTicket(412))
                                                  //| cmd: Some(StringTrackingTicket(413))
                                                  //| cmd: Some(StringTrackingTicket(414))
                                                  //| cmd: Some(StringTrackingTicket(415))
                                                  //| cmd: Some(StringTrackingTicket(416))
                                                  //| cmd: Some(StringTrackingTicket(417))
                                                  //| cmd: Some(StringTrackingTicket(418))
                                                  //| cmd: Some(StringTrackingTicket(419))
                                                  //| cmd: Some(StringTrackingTicket(420))
                                                  //| cmd: Some(StringTrackingTicket(421))
                                                  //| cmd: Some(StringTrackingTicket(422))
                                                  //| cmd: Some(StringTrackingTicket(423))
                                                  //| cmd: Some(StringTrackingTicket(424))
                                                  //| cmd: Some(StringTrackingTicket(425))
                                                  //| cmd: Some(StringTrackingTicket(426))
                                                  //| cmd: Some(StringTrackingTicket(427))
                                                  //| cmd: Some(StringTrackingTicket(428))
                                                  //| cmd: Some(StringTrackingTicket(429))
                                                  //| cmd: Some(StringTrackingTicket(430))
                                                  //| cmd: Some(StringTrackingTicket(431))
                                                  //| cmd: Some(StringTrackingTicket(432))
                                                  //| cmd: Some(StringTrackingTicket(433))
                                                  //| cmd: Some(StringTrackingTicket(434))
                                                  //| cmd: Some(StringTrackingTicket(435))
                                                  //| cmd: Some(StringTrackingTicket(436))
                                                  //| cmd: Some(StringTrackingTicket(437))
                                                  //| cmd: Some(StringTrackingTicket(438))
                                                  //| cmd: Some(StringTrackingTicket(439))
                                                  //| cmd: Some(StringTrackingTicket(440))
                                                  //| cmd: Some(StringTrackingTicket(441))
                                                  //| cmd: Some(StringTrackingTicket(442))
                                                  //| cmd: Some(StringTrackingTicket(443))
                                                  //| cmd: Some(StringTrackingTicket(444))
                                                  //| cmd: Some(StringTrackingTicket(445))
                                                  //| cmd: Some(StringTrackingTicket(446))
                                                  //| cmd: Some(StringTrackingTicket(447))
                                                  //| cmd: Some(StringTrackingTicket(448))
                                                  //| cmd: Some(StringTrackingTicket(449))
                                                  //| cmd: Some(StringTrackingTicket(450))
                                                  //| cmd: Some(StringTrackingTicket(451))
                                                  //| cmd: Some(StringTrackingTicket(452))
                                                  //| cmd: Some(StringTrackingTicket(453))
                                                  //| cmd: Some(StringTrackingTicket(454))
                                                  //| cmd: Some(StringTrackingTicket(455))
                                                  //| cmd: Some(StringTrackingTicket(456))
                                                  //| cmd: Some(StringTrackingTicket(457))
                                                  //| cmd: Some(StringTrackingTicket(458))
                                                  //| cmd: Some(StringTrackingTicket(459))
                                                  //| cmd: Some(StringTrackingTicket(460))
                                                  //| cmd: Some(StringTrackingTicket(461))
                                                  //| cmd: Some(StringTrackingTicket(462))
                                                  //| cmd: Some(StringTrackingTicket(463))
                                                  //| cmd: Some(StringTrackingTicket(464))
                                                  //| cmd: Some(StringTrackingTicket(465))
                                                  //| cmd: Some(StringTrackingTicket(466))
                                                  //| cmd: Some(StringTra
                                                  //| Output exceeds cutoff limit.

}