akka {
	actor {
		#guardian-supervisor-strategy = "almhirt.akkaconf.GuardianStrategyConfigurator"
	}
}


almhirt {
	context {
	   max-init-duration = 10 seconds
	   use-dedicated-futures-dispatcher = true
	   use-dedicated-cruncher-dispatcher = true
	   use-dedicated-blockers-dispatcher = false
	
	   
	   dispatchers {
		    futures-dispatcher = {
				# Dispatcher is the name of the event-based dispatcher
				type = Dispatcher
				# What kind of ExecutionService to use
				executor = "fork-join-executor"
				# Configuration for the fork join pool
				fork-join-executor {
				# Min number of threads to cap factor-based parallelism number to
				parallelism-min = 2
				# Parallelism (threads) ... ceil(available processors * factor)
				parallelism-factor = 2.0
				# Max number of threads to cap factor-based parallelism number to
				parallelism-max = 10
				}
				# Throughput defines the maximum number of messages to be
				# processed per actor before the thread jumps to the next actor.
				# Set to 1 for as fair as possible.
				throughput = 100	    
		   }
		    blockers-dispatcher = {
				# Dispatcher is the name of the event-based dispatcher
				type = Dispatcher
				# What kind of ExecutionService to use
				executor = "thread-pool-executor"
				# Configuration for the thread pool
				thread-pool-executor {
				# minimum number of threads to cap factor-based core number to
				core-pool-size-min = 1
				# No of core threads ... ceil(available processors * factor)
				core-pool-size-factor = 2.0
				# maximum number of threads to cap factor-based number to
				core-pool-size-max = 8
				}
				# Throughput defines the maximum number of messages to be
				# processed per actor before the thread jumps to the next actor.
				# Set to 1 for as fair as possible.
				throughput = 100
		    }
		    cruncher-dispatcher = {
				# Dispatcher is the name of the event-based dispatcher
				type = Dispatcher
				# What kind of ExecutionService to use
				executor = "thread-pool-executor"
				# Configuration for the thread pool
				thread-pool-executor {
				# minimum number of threads to cap factor-based core number to
				core-pool-size-min = 2
				# No of core threads ... ceil(available processors * factor)
				core-pool-size-factor = 2.0
				# maximum number of threads to cap factor-based number to
				core-pool-size-max = 4
				}
				# Throughput defines the maximum number of messages to be
				# processed per actor before the thread jumps to the next actor.
				# Set to 1 for as fair as possible.
				throughput = 100
		    }
	 	}
	}
	
   	streams {
	 use-dedicated-dispatcher = true
	 soak-commands = true
	 soak-events = true
	 event-buffer-size = 100
	 command-buffer-size = 10
	 initial-commands-fanout-buffer-size = 8
	 max-commands-fanout-buffer-size = 16
	 initial-events-fanout-buffer-size = 8
	 max-events-fanout-buffer-size = 16
     
     dedicated-dispatcher {
			# Dispatcher is the name of the event-based dispatcher
			type = Dispatcher
			# What kind of ExecutionService to use
			executor = "thread-pool-executor"
			# Configuration for the thread pool
			thread-pool-executor {
			# minimum number of threads to cap factor-based core number to
			core-pool-size-min = 2
			# No of core threads ... ceil(available processors * factor)
			core-pool-size-factor = 2.0
			# maximum number of threads to cap factor-based number to
			core-pool-size-max = 8
			}
			# Throughput defines the maximum number of messages to be
			# processed per actor before the thread jumps to the next actor.
			# Set to 1 for as fair as possible.
			throughput = 100
     }
   }
	

	components {
		misc {
			event-sink-hub {
				enabled = true
				with-black-hole-if-empty = true
				buffer-size = 100


				event-publishers {
					event-log-writer {
						enabled = true
						event-log-path = "/user/almhirt/components/event-logs/event-log"
						warning-threshold = 2 seconds
						auto-connect = true
						resolve-settings {
							resolve-wait = 3 seconds
							retry-pause = 1 seconds
							retry-max-time = 30 seconds
						}
					}
				
					http-event-publishers {
						
						elastic-search-event-publisher {
						}
						
						a-http-event-publisher {
						}
					}
				}

			}
		
			command-status-tracker {
				target-cache-size = 100
				shrink-cache-at = 110
				check-timeout-interval = 5 seconds
				auto-connect = true
			}
			
			command-endpoint {
				command-status-tracker-path = "/user/almhirt/components/misc/command-status-tracker"
			  	max-tracking-duration = 10 seconds
			  	auto-connect = true
				resolve-settings {
					resolve-wait = 3 seconds
					retry-pause = 1 seconds
					retry-max-time = 30 seconds
				}
			}
		}
		
		views {
			aggregate-root-views {
				#default
				aggregate-event-log-path = "/user/almhirt/components/misc/aggregate-root-event-log"
				snapshot-storage-path = none
				resolve-settings {
					resolve-wait = 3 seconds
					retry-pause = 1 seconds
					retry-max-time = 30 seconds
				}
	
				event-buffer-size = 100
	
	
				#specific setting for an AggregateRootViews
				a-aggregate-root-views {
					event-buffer-size = 100
				}
			}
			
						
			unprojected-view {
				return-to-unitialized-after = 10 minutes
			}
			
		}
		
		aggregates {
			aggregate-root-nexus {
			}
	
			aggregate-root-hive {
				#default
				aggregate-event-log-path = "/user/almhirt/components/misc/aggregate-root-event-log"
				snapshot-storage-path = none
				resolve-settings {
					resolve-wait = 3 seconds
					retry-pause = 1 seconds
					retry-max-time = 30 seconds
				}
				
				command-buffer-size = 100
				enqueud-events-throttling-threshold-factor = 2
			
				#specific setting for an AggregateRootViews
				a-aggregate-root-hive {
					command-buffer-size = 100
					enqueud-events-throttling-threshold-factor = 2
				}
				
			}
				
			aggregate-root-drone {
				return-to-unitialized-after = 10 minutes
			}
		}
		
		event-logs {
			aggregate-root-event-log {
			}
			
			event-log {
			}
		}
		
	}
}